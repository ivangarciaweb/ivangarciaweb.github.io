function clearInput(t){t.value=""}function searchBarCode(t){document.getElementById("buttonSearch").addEventListener("click",function(){let n=document.getElementById("inputText"),r=n.value;clearInput(n),bringProductInfo(t,r)})}function clearList(t){t.innerHTML=""}function writeProductInfo(t,n){"product found"==n.status_verbose&&null!=n.code?t.innerHTML=`\n\t\t<h2>${n.product.product_name}</h2>\n\t\t<ul class="gallery">\n\t\t\t<li><img src="${n.product.image_url}"></p></li>\n\t\t\t<li><img src="${n.product.image_nutrition_url}"></p></li>\n\t\t</ul>\t\n\t\t<ul class="productProperties">\n\t\t\t<li><p><strong>Marca:</strong>${n.product.brands}</p></li>\n\t\t\t<li><p><strong>Nombre del producto:</strong>${n.product.product_name}</p></li>\n\t\t\t<li><p><strong>Código de barras:</strong>${n.product.code}</p></li>\n\t\t\t<li><p><strong>Categoria:</strong>${n.product.categories}</p></li>\n\t\t\t<li><p><strong>País de procedencia:</strong>${n.product.countries}</p></li>\n\t\t\t<li><p><strong>Ingredientes:</strong>${n.product.ingredients_text}</p></li>\n\t\t\t<li><p><strong>Alergenos:</strong>${n.product.allergens}</p></li>\n\t\t\t<li><p><strong>ingredientes 2:</strong>${n.product.ingredients_text_with_allergens}</p></li>\n\t\t\t<li><p><strong>Nivel de grasa:</strong>${n.product.nutrient_levels.fat}</p></li>\n\t\t\t<li><p><strong>Nivel de sal:</strong>${n.product.nutrient_levels.salt}</p></li>\n\t\t\t<li><p><strong>Nivel de azúcares:</strong>${n.product.nutrient_levels.sugars}</p></li>\n\t\t\t<li><p><strong>Grado Nutricional:</strong>${n.product.nutrition_grades}</p></li>\n\t\t\t<li><p><strong>Posibles trazas de:</strong>${n.product.traces}</p></li>\n\t\t\t<li><p><strong>Última actualización:</strong>${n.product.last_edit_dates_tags[2]}</p></li>\n\t\t\t<li><p><strong>Envase:</strong>${n.product.packaging}</p></li>\n\t\t\t<li><p><strong>Peso:</strong>${n.product.quantity}</p></li>\n\t\t\t<li><p><strong>Lugar de fabricación:</strong>${n.product.manufacturing_places}</p></li>\n\t\t</ul>\t\t\n\t\t<table class="table table-striped table-bordered">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Valor Nutricional</th>\n\t\t\t\t\t<th>100g</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Valor Energético</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.energy_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Carbohidratos</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.carbohydrates_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Grasas</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.fat_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Fibra</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.fiber_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Proteinas</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.proteins_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Sal</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.salt_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Grasas Saturadas</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.fat_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Sodio</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.sodium_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Azucares</td>\n\t\t\t\t\t\t<td>${n.product.nutriments.sugars_100g}</td>\n\t\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t`:t.innerHTML='\n\t\t\t<h4 class="error"><strong>!</strong><br/><br/>¡Ups! No se ha encontrado el producto relacionado con este código de barras en nuestra base de datos. Prueba a reescribirlo o introducir otro.</h4>\n\t\t'}async function bringProductInfo(t,n){let r=t+n+".json",e=await fetch(r),o=await e.json();console.log(o),clearList(productsList),writeProductInfo(productsList,o)}let productsList=document.getElementById("productInfo");const url="https://world.openfoodfacts.org/api/v0/product/";searchBarCode(url),$(function(){var t={inputStream:{type:"LiveStream",constraints:{aspectRatio:{min:1,max:100},facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,decoder:{readers:[{format:"ean_reader",config:{}}]},locate:!0},n=$.extend({},t,{inputStream:{size:800}});$("#livestream_scanner").on("shown.bs.modal",function(n){Quagga.init(t,function(t){if(t)return $("#livestream_scanner .modal-body .error").html('<div class="alert alert-danger"><strong><i class="fa fa-exclamation-triangle"></i> '+t.name+"</strong>: "+t.message+"</div>"),void Quagga.stop();Quagga.start()})}),Quagga.onProcessed(function(t){var n=Quagga.canvas.ctx.overlay,r=Quagga.canvas.dom.overlay;t&&(t.boxes&&(n.clearRect(0,0,parseInt(r.getAttribute("width")),parseInt(r.getAttribute("height"))),t.boxes.filter(function(n){return n!==t.box}).forEach(function(t){Quagga.ImageDebug.drawPath(t,{x:0,y:1},n,{color:"green",lineWidth:2})})),t.box&&Quagga.ImageDebug.drawPath(t.box,{x:0,y:1},n,{color:"#00F",lineWidth:2}),t.codeResult&&t.codeResult.code&&Quagga.ImageDebug.drawPath(t.line,{x:"x",y:"y"},n,{color:"red",lineWidth:3}))}),Quagga.onDetected(function(t){t.codeResult.code&&($("#inputText").val(t.codeResult.code),Quagga.stop(),setTimeout(function(){$("#livestream_scanner").modal("hide")},1e3),document.getElementById("buttonSearch").click())}),$("#livestream_scanner").on("hide.bs.modal",function(){Quagga&&Quagga.stop()}),$("#livestream_scanner input:file").on("change",function(t){t.target.files&&t.target.files.length&&Quagga.decodeSingle($.extend({},n,{src:URL.createObjectURL(t.target.files[0])}),function(t){alert(t.codeResult.code)})})});